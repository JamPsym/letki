#include "display_hw.h"

#include "ch32v00x.h"

const Glyph8x8 FONT_8x8[] = {
    // --- BASE LATIN (A–Z + space) ---
    {L'A',{0x00,0xFE,0x11,0x11,0x11,0xFE,0x00,0x00}},
    {L'B',{0x00,0xFF,0x91,0x91,0x91,0x6E,0x00,0x00}},
    {L'C',{0x00,0x7E,0x81,0x81,0x81,0x66,0x00,0x00}},
    {L'D',{0x00,0xFF,0x81,0x81,0x81,0x7E,0x00,0x00}},
    {L'E',{0x00,0xFF,0x91,0x91,0x91,0x81,0x00,0x00}},
    {L'F',{0x00,0xFF,0x11,0x11,0x11,0x01,0x00,0x00}},
    {L'G',{0x00,0x7E,0x81,0x81,0x89,0x7A,0x00,0x00}},
    {L'H',{0x00,0xFF,0x10,0x10,0x10,0xFF,0x00,0x00}},
    {L'I',{0x00,0x81,0x81,0xFF,0x81,0x81,0x00,0x00}},
    {L'J',{0x00,0x60,0x80,0x81,0x81,0x7F,0x00,0x00}},
    {L'K',{0x00,0xFF,0x10,0x28,0x44,0x83,0x00,0x00}},
    {L'L',{0x00,0xFF,0x80,0x80,0x80,0x80,0x00,0x00}},
    {L'M',{0x00,0xFF,0x08,0x30,0x08,0xFF,0x00,0x00}},
    {L'N',{0x00,0xFF,0x08,0x10,0x20,0xFF,0x00,0x00}},
    {L'O',{0x00,0x7E,0x81,0x81,0x81,0x7E,0x00,0x00}},
    {L'P',{0x00,0xFF,0x11,0x11,0x11,0x0E,0x00,0x00}},
    {L'Q',{0x00,0x7E,0x81,0x81,0x85,0xFF,0x00,0x00}},
    {L'R',{0x00,0xFF,0x11,0x31,0x51,0x8E,0x00,0x00}},
    {L'S',{0x00,0x4E,0x91,0x91,0x91,0x62,0x00,0x00}},
    {L'T',{0x00,0x01,0x01,0xFF,0x01,0x01,0x00,0x00}},
    {L'U',{0x00,0x7F,0x80,0x80,0x80,0x7F,0x00,0x00}},
    {L'V',{0x00,0x3F,0x40,0x80,0x40,0x3F,0x00,0x00}},
    {L'W',{0x00,0xFF,0x40,0x38,0x40,0xFF,0x00,0x00}},
    {L'X',{0x00,0xC3,0x24,0x18,0x24,0xC3,0x00,0x00}},
    {L'Y',{0x00,0x0F,0x10,0xE0,0x10,0x0F,0x00,0x00}},
    {L'Z',{0x00,0xC1,0xA1,0x91,0x89,0x87,0x00,0x00}},
    {L' ',{0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00}},

    // --- POLISH LETTERS (8×8, UPPERCASE STYLE) ---
    {L'Ą',{0x00,0x7E,0x11,0x11,0x11,0x7E,0xC0,0x00}},
    {L'Ć',{0x00,0x7C,0x82,0x82,0x82,0x4C,0x80,0x01}},
    {L'Ę',{0x00,0x7F,0x51,0x51,0xD1,0x41,0x00,0x00}},
    {L'Ł',{0x00,0xFF,0x88,0x98,0x8C,0x80,0x00,0x00}},
    {L'Ń',{0x00,0xFF,0x10,0x08,0x04,0xFF,0x02,0x01}},
    {L'Ó',{0x00,0x7C,0x82,0x82,0x82,0x7C,0x80,0x01}},
    {L'Ś',{0x00,0x4C,0x92,0x92,0x93,0x64,0x00,0x00}},
    {L'Ź',{0x00,0xC2,0xA2,0x92,0x8B,0x86,0x00,0x00}},
    {L'Ż',{0x00,0x62,0x52,0x4B,0x47,0x42,0x00,0x00}}
};

const size_t GLYPH_LEN = sizeof(FONT_8x8) / sizeof(FONT_8x8[0]);

const struct gpio_line row_drive_lines[8] = {
    {GPIOD_BASE, 2},
    {GPIOA_BASE, 1},
    {GPIOC_BASE, 3},
    {GPIOC_BASE, 4},
    {GPIOD_BASE, 4},
    {GPIOD_BASE, 3},
    {GPIOC_BASE, 0},
    {GPIOD_BASE, 7},
};

const struct gpio_line column_sink_lines[8] = {
    {GPIOA_BASE, 2},
    {GPIOC_BASE, 1},
    {GPIOC_BASE, 2},
    {GPIOC_BASE, 5},
    {GPIOC_BASE, 6},
    {GPIOC_BASE, 7},
    {GPIOD_BASE, 0},
    {GPIOD_BASE, 1},
};
